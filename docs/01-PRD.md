# AI智能起名顾问 - 产品需求文档 (PRD)

> 版本: v2.1  
> 更新日期: 2026-02-03  
> 状态: H5 Web + AI Agent 生成 + SQLite

## 1. 产品概述

### 1.1 产品定位
AI智能起名顾问是一款基于传统国学文化与现代AI技术相结合的智能起名 H5 应用。采用 **AI Agent** 架构，通过大语言模型实时生成八字分析、名字推荐和详细解析，为每个宝宝量身定制专属好名。

**技术特点**:
- **纯 H5 Web 应用**：无需下载，微信/浏览器直接访问
- **AI Agent 驱动**：八字、名字、解析全部由 AI 实时生成，非预设库
- **SQLite 轻量存储**：本地/服务端轻量数据持久化
- **商业模式**：免费体验 + 付费解锁完整内容

### 1.2 核心价值主张
- **AI 实时生成**：八字分析、名字推荐、详细解析均由 AI Agent 动态生成
- **千人千名**：不是固定名字库，根据八字和需求实时生成独特名字
- **文化传承**：以千年八字命理、五行学说为根基
- **个性定制**：通过对话了解家长期望，真正的个性化推荐

### 1.3 目标用户
- 准父母、新手父母
- 重视传统文化和名字寓意的家庭
- 追求独特、有深意名字的用户

---

## 2. 核心功能模块

### 2.1 对话式起名流程

#### 2.1.1 信息收集阶段（免费）
| 步骤 | 功能 | 说明 |
|-----|------|------|
| 1 | 宝宝基础信息 | 姓氏、性别、出生日期时间、出生地 |
| 2 | 期望了解 | 风格选择（诗意文化/现代简约/传统五行/需要建议） |
| 3 | 补充信息 | 避讳字、字辈要求、喜欢的意象（可选） |

#### 2.1.2 AI 八字分析阶段（AI Agent 生成）

> **输出格式**: AI 必须输出**结构化 JSON 数据**，前端基于预设数据结构直接渲染 UI 组件。

**分析内容（AI 实时计算并生成结构化 JSON）**:
- **生辰八字**：年柱、月柱、日柱、时柱（AI 根据历法计算）
- **藏干分析**：天干地支藏干详情（AI 生成）
- **纳音五行**：六十甲子纳音（AI 生成）
- **五行分布统计**：金木水火土数量（AI 计算）
- **五行含量分析**：详细数值可视化（AI 计算）
- **喜用分析**：同类异类得分、日主旺衰判定（AI 推理）
- **起名建议**：根据喜用给出用字建议（AI 生成）

**付费策略**:
- 基础八字展示（免费）
- 详细分析 + 起名建议（付费解锁）

#### 2.1.3 AI 名字推荐阶段（AI Agent 实时生成）

> **输出格式**: AI 必须输出**结构化 JSON 数组**，每个名字包含完整的结构化解析数据，前端直接渲染。

**核心特点**：
- **非预设名字库**：所有名字由 AI 根据八字和期望实时生成
- **三大风格系列**：AI 根据选择生成对应风格的名字
  - 诗词雅韵系列
  - 山河大气系列
  - 现代简约系列

**付费策略**:
- 每个系列仅展示第一个名字（免费预览）
- 其他名字显示锁定状态
- 支付后解锁该系列全部 AI 生成名字

### 2.2 AI 名字解析（AI Agent 生成）

> **输出格式**: AI 名字解析输出**结构化 JSON**，包含四维解析的完整数据字段，前端组件直接消费渲染。

每个名字的四维深度解析均由 AI 实时生成为结构化 JSON：

#### 2.2.1 概览
- 名字寓意及出处（AI 生成）
- 专属个性化解读（AI 根据宝宝信息生成）
- 重名度评估（AI 估算）
- 综合评分（AI 评分）

#### 2.2.2 汉字解析
- 单字拼音、五行属性（AI 判定）
- 康熙字典释义（AI 检索生成）
- 字义来源典籍（AI 生成）
- 笔画数（AI 计算）

#### 2.2.3 音韵分析
- 声调组合评价（AI 分析）
- 声母搭配分析（AI 分析）
- 音韵评分（AI 评分）

#### 2.2.4 五行分析
- 名字五行组合（AI 判定）
- 与八字喜用的匹配度（AI 分析）
- 五行相生相克说明（AI 生成）

### 2.3 支付功能设计

#### 2.3.1 付费点设计
| 付费点 | 免费内容 | 付费内容 | 价格 |
|-------|---------|---------|------|
| 单个系列解锁 | 第一个 AI 名字预览 | 该系列全部 AI 生成名字 + 详情 | ¥9.9 |
| 全部系列解锁 | 同上 | 全部 AI 生成名字 + 详情 | ¥19.9 |

#### 2.3.2 支付流程
```
用户点击锁定名字
    ↓
显示支付弹窗（微信支付/支付宝）
    ↓
调起支付SDK
    ↓
支付成功 → 解锁内容 → 显示 AI 生成的名字详情
    ↓
支付失败 → 提示重试/取消
```

### 2.4 多宝宝管理
- 支持创建多个独立的起名会话
- 每个会话保存完整对话记录
- 按宝宝姓氏区分展示
- 数据存储在 SQLite（本地 IndexedDB 或服务端 SQLite）

### 2.5 收藏系统
- 解锁后可收藏喜欢的 AI 生成名字
- 按宝宝分组展示收藏列表
- 支持取消收藏

---

## 3. 用户流程

### 3.1 主流程

```
启动 H5 → 欢迎页
    ↓
选择"开始起名"或"切换已有宝宝"
    ↓
填写宝宝信息（姓氏/性别/出生时间）【免费】
    ↓
选择期望风格【免费】
    ↓
补充信息（可选）【免费】
    ↓
AI 生成八字分析【基础免费，详情付费】
    ↓
选择名字方向
    ↓
AI 生成名字预览【第一个免费，其他锁定】
    ↓
点击锁定名字 → 支付弹窗 → 微信支付
    ↓
支付成功 → AI 生成并展示全部名字
    ↓
查看 AI 生成的名字详情 → 换一个 / 收藏 / 选定
    ↓
确认名字 → 生成 AI 起名报告 → 完成
```

### 3.2 AI Agent 工作流程

```
用户提交宝宝信息
    ↓
AI Agent 计算八字
    ├─ 计算四柱（年/月/日/时柱）
    ├─ 推算藏干、纳音
    ├─ 统计五行个数、含量
    └─ 分析喜用神、旺衰
    ↓
AI Agent 生成分析报告
    ↓
用户选择期望风格
    ↓
AI Agent 生成名字
    ├─ 根据八字喜用筛选用字
    ├─ 结合风格生成名字组合
    ├─ 每个名字生成详细解析
    └─ 打分并排序
    ↓
展示 AI 生成的名字列表
    ↓
用户选择名字
    ↓
AI Agent 生成深度解析
    ├─ 汉字解析（字义/出处/五行）
    ├─ 音韵分析（声调/声母）
    ├─ 五行匹配分析
    └─ 专属寓意解读
```

---

## 4. 非功能需求

### 4.1 性能要求
- 首屏加载时间 < 2s
- AI 响应时间 < 5s（显示 loading）
- 支付调起时间 < 500ms
- 支持弱网环境

### 4.2 兼容性
- 支持 iOS Safari、Android Chrome、微信内置浏览器
- 响应式布局，适配 320px-428px 宽度
- 支持 PWA，可添加到桌面

### 4.3 数据存储
- **方案 A（纯前端）**：IndexedDB + localStorage
- **方案 B（轻后端）**：SQLite + 可选用户系统

### 4.4 AI 服务
- 支持 Deepseek / OpenAI / Claude / 通义千问等
- 支持流式输出
- 支持容错重试

---

## 5. 技术架构简图

```
┌─────────────────────────────────────────┐
│           H5 Web 前端                    │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐   │
│  │ 欢迎页  │ │ 对话页  │ │ 支付页  │   │
│  └─────────┘ └─────────┘ └─────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │      useNamingFlow Hook          │   │
│  │   - 状态管理  - 业务流程         │   │
│  │   - SQLite / IndexedDB 存储     │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
                    │
                    ▼ HTTPS
┌─────────────────────────────────────────┐
│         轻量后端（可选）                  │
│  ┌──────────┐ ┌──────────┐             │
│  │ API 服务 │ │ 支付服务 │             │
│  │ SQLite   │ │ 微信/支付宝│             │
│  └──────────┘ └──────────┘             │
└─────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────┐
│           AI Agent 服务                 │
│  ┌──────────┐ ┌──────────┐             │
│  │ OpenAI   │ │ Claude   │             │
│  │ Deepseek │ │ 通义千问 │             │
│  └──────────┘ └──────────┘             │
└─────────────────────────────────────────┘
```

---

## 6. 附录

### 6.1 AI Agent Prompt 设计原则

**八字分析 Agent**:
- 输入：出生时间（年月日时）
- 输出：完整八字分析 JSON
- 能力：历法计算、五行推理、喜用分析

**名字生成 Agent**:
- 输入：八字信息 + 用户期望
- 输出：名字列表 + 详细解析
- 能力：汉字学、诗词典故、音韵学

### 6.2 五行配色
- 金：#F59E0B（琥珀色）
- 木：#22C55E（绿色）
- 水：#3B82F6（蓝色）
- 火：#EF4444（红色）
- 土：#D97706（深琥珀色）

---

**最后更新**: 2026-02-03  
**文档版本**: v2.1
